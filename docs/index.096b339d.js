!function(e,n,o,t,s){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof r.parcelRequire0da0&&r.parcelRequire0da0,c=a.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function i(n,o){if(!c[n]){if(!e[n]){var t="function"==typeof r.parcelRequire0da0&&r.parcelRequire0da0;if(!o&&t)return t(n,!0);if(a)return a(n,!0);if(l&&"string"==typeof n)return l(n);var s=new Error("Cannot find module '"+n+"'");throw s.code="MODULE_NOT_FOUND",s}u.resolve=function(o){return e[n][1][o]||o},u.cache={};var d=c[n]=new i.Module(n);e[n][0].call(d.exports,u,d,d.exports,this)}return c[n].exports;function u(e){return i(u.resolve(e))}}i.isParcelRequire=!0,i.Module=function(e){this.id=e,this.bundle=i,this.exports={}},i.modules=e,i.cache=c,i.parent=a,i.register=function(n,o){e[n]=[function(e,n){n.exports=o},{}]},Object.defineProperty(i,"root",{get:function(){return r.parcelRequire0da0}}),r.parcelRequire0da0=i;for(var d=0;d<n.length;d++)i(n[d]);var u=i(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define((function(){return u}))}({gU7Mt:[function(e,n,o){e("./helpers/bundle-manifest").register(JSON.parse('{"6bM7J":"index.096b339d.js","5z4q1":"bittorrent-tracker.5493c0f1.js","1Kgqg":"bittorrent-tracker.63ebcecb.js","bDnEO":"editor.main.a5ed7f19.js","O5zTd":"cssMode.70f1b510.js","52RTZ":"editor.main.82cc0fed.css","8KbuS":"codicon.83beb013.ttf","jBCzN":"jsonMode.f1966039.js","iwG57":"htmlMode.492eb426.js","gy7Px":"abap.6232818b.js","jyfUo":"apex.384abdf7.js","7dmjY":"azcli.47d50b7b.js","eP1p2":"bat.03dcdf2a.js","fuGpX":"bicep.5e32402f.js","9YKMx":"cameligo.bc9e8eaf.js","iFHBJ":"clojure.4cc2ca41.js","4Pdlp":"coffee.c8b17263.js","jKu8G":"cpp.7976f462.js","kTypW":"csharp.d9ea50c9.js","4tczM":"csp.9762feff.js","6zdoF":"css.043ad45b.js","iOY2t":"dart.c076edfc.js","6W3WB":"dockerfile.fc81ca4e.js","5D3vF":"ecl.61e3cb54.js","kB9Sf":"elixir.230c2049.js","hggGd":"fsharp.20157e9e.js","jxN6Y":"go.e76e86c0.js","3tDtw":"graphql.be301514.js","3CgLc":"handlebars.880f245f.js","cn9lD":"hcl.543b5b55.js","7LVgV":"html.ecdc8ce2.js","cH8Bx":"ini.a10e039d.js","agMrd":"java.c3ce2190.js","2QOKC":"javascript.81c6bb1a.js","bkgyN":"typescript.49f65acb.js","bzNIh":"julia.001bfc3e.js","c7Nta":"kotlin.88212f12.js","bN8cj":"less.78d62730.js","ifGQU":"lexon.75a06aae.js","hsqG8":"lua.28c4d25d.js","bdKR4":"liquid.83e912d8.js","32Kzv":"m3.e424c8d3.js","bGeDV":"markdown.fded5c1d.js","7bOR7":"mips.a0431c11.js","jgkcq":"msdax.c76edc58.js","5bniF":"mysql.b84c2243.js","7mNWe":"objective-c.55d5226c.js","56yDG":"pascal.8f28c7ab.js","U34GZ":"pascaligo.1b877655.js","bJUov":"perl.405b76a6.js","7O2uu":"pgsql.f1f09893.js","cI2Tt":"php.4de52760.js","b5YEV":"postiats.cf1a4c94.js","esETd":"powerquery.946c3fbc.js","dynj9":"powershell.31e05c5e.js","iOWil":"pug.5bef4e41.js","4NnpT":"python.70b93a77.js","ijbeh":"qsharp.ffab69b5.js","lQWoW":"r.1c11019e.js","hoVi9":"razor.fde920ca.js","cYF0z":"redis.c77e0450.js","8jn8x":"redshift.eafcc119.js","lrbuz":"restructuredtext.7b36b3e8.js","ccmpJ":"ruby.46f58bf5.js","l1cCh":"rust.ce20d553.js","s2yxS":"sb.1445f51a.js","7H48F":"scala.11064539.js","3ulwe":"scheme.73728c85.js","3qHTF":"scss.3c4ae60a.js","dlUSP":"shell.8dcc27b9.js","2DnsV":"solidity.a522d7ad.js","eQX81":"sophia.69d2e575.js","gRAfr":"sparql.538e76b7.js","lYnBv":"sql.63dd8e9e.js","bZF8e":"st.cb71bfd9.js","3vbIu":"swift.47bd57a8.js","ag2Ce":"systemverilog.982d2d82.js","lWKne":"tcl.4dbcfe26.js","co7lE":"twig.3c0cc5d7.js","4jGjN":"vb.2efa9ae2.js","kLBpT":"xml.79a4cda0.js","30JNl":"yaml.171f822c.js","iYm2R":"editor.main.140d6692.js","jsnQJ":"tsMode.6146bf63.js"}'))},{"./helpers/bundle-manifest":"2h5Rj"}],"2h5Rj":[function(e,n,o){"use strict";var t={};n.exports.register=function(e){for(var n=Object.keys(e),o=0;o<n.length;o++)t[n[o]]=e[n[o]]},n.exports.resolve=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}},{}],dxeIl:[function(e,n,o){function t(){const e=[],n="0123456789abcdef";for(let o=0;o<40;o++)e.push(n[Math.floor(Math.random()*n.length)]);return e.join("")}const s=t();let r=null;const a=new Map;let c=null,l=null,i=null;const d=document.querySelector("select#languages");let u=!0;const f=new Set;function b(){const e=[`<li>${c}</li>`];for(const n of a.values())e.push(`<li>${n.displayName}</li>`);document.querySelector("#peers").innerHTML=e.join("")}function p(){const e=t();window.location.href=window.location.pathname+"?room="+encodeURIComponent(function(e){let n="";for(let o=0;o<e.length;o+=2)n+=String.fromCharCode(parseInt(e.substr(o,2),16));return btoa(n)}(e))}async function H(n){const o=localStorage.getItem("editor-name");c=null==o?prompt("Your name is..."):prompt("Your name is...",o),null!=c&&""!==c||(c=`Peer ${s.slice(0,8)}`),localStorage.setItem("editor-name",c),b();const t=await e("c93a1dfa8169f0df");var p;r=new t({infoHash:(p=n,atob(p).split("").map((e=>e.charCodeAt(0).toString(16).padStart(2,"0"))).join("")),peerId:s,announce:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]}),console.debug("tracker:",r),r.setInterval(9e5),r.on("warning",console.warn),r.on("error",(e=>{f.delete(e.announce),console.log("num connected trackers:",f.size),0===f.size&&(document.querySelector("#connection-status").textContent="Connecting...")})),r.on("peer",(n=>{console.debug("peer:",n);const o=n.id;40!==o.length||a.has(o)||n.on("connect",(()=>{!function(n){const o=n.id,t={lineNumber:1,column:1},s={selectionStartLineNumber:0,selectionStartColumn:0,positionLineNumber:0,positionColumn:0};a.set(o,{displayName:"",conn:n,position:t,positionDecorations:[],selection:s,selectionDecorations:[]}),n.on("data",(n=>async function(n,o){const t=JSON.parse(new TextDecoder("utf-8").decode(o));console.debug("incoming:",t);const s=a.get(n);if(null==s)return;if(null==i)return;const r=await e("3465d684ff9d95e1");if(u=!1,"edits"===t.type){const e=t.value.map((e=>{const n=e.range;return{range:new r.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn),text:e.text,forceMoveMarkers:!0}}));i.pushEditOperations([],e,(()=>null)),console.debug("incoming done")}else"greet"===t.type?(s.displayName=t.value,b()):"state"===t.type?(i.setValue(t.value),d.value=t.language,r.editor.setModelLanguage(i,t.language)):"cursor"===t.type?(s.position=t.value,async function(n){const o=await e("3465d684ff9d95e1");console.debug("new peer position:",n.position),n.positionDecorations=l.deltaDecorations(n.positionDecorations,[{range:new o.Range(n.position.lineNumber,n.position.column,n.position.lineNumber,n.position.column),options:{className:"peer-cursor"}}])}(s)):"changeLanguage"===t.type?(d.value=t.value,r.editor.setModelLanguage(i,t.value)):"selection"===t.type&&(s.selection=t.value,async function(n){const o=await e("3465d684ff9d95e1");console.debug("new peer selection:",n.selection),n.selectionDecorations=l.deltaDecorations(n.selectionDecorations,[{range:new o.Range(n.selection.selectionStartLineNumber,n.selection.selectionStartColumn,n.selection.positionLineNumber,n.selection.positionColumn),options:{className:"peer-selection"}}])}(s));u=!0}(o,n))),n.on("close",(()=>{console.debug("peer closed:",n.id);const e=a.get(n.id);e&&(null==l||l.deltaDecorations(e.positionDecorations,[]),a.delete(n.id)),b()})),n.on("error",(e=>{a.has(n.id)&&console.error("peer error:",e)})),n.send(JSON.stringify({type:"greet",value:c}));const r=i.getValue();r.length>0&&n.send(JSON.stringify({type:"state",value:r,language:d.value}));const f=null==l?void 0:l.getPosition();null!=f&&n.send(JSON.stringify({type:"cursor",value:f}))}(n),b()}))})),r.on("update",(e=>{f.add(e.announce),document.querySelector("#connection-status").textContent="connected",console.log("num connected trackers:",f.size)})),r.start()}function _(e){console.debug("broadcasting to:",a);const n=JSON.stringify(e);for(const e of a.values())try{e.conn.send(n)}catch{}}console.info("peerId:",s),async function(){const n=new URLSearchParams(window.location.search).get("room");if(!n){const e=document.querySelector("#new-room");return e.addEventListener("click",p,!1),void(e.style.display="block")}document.querySelector("#container").style.display="grid",H(n);const o=await e("3465d684ff9d95e1");l=o.editor.create(document.getElementById("editor"),{value:"",language:"plaintext",scrollBeyondLastLine:!1}),console.debug("editor:",l),i=l.getModel(),console.debug("model:",i),i.onDidChangeContent((e=>{console.debug("changeContent:",e),u&&_({type:"edits",value:e.changes})})),l.onDidChangeCursorPosition((e=>{console.debug("changeCursor:",e),_({type:"cursor",value:e.position})})),l.onDidChangeCursorSelection((e=>{console.debug("selection:",e.selection),_({type:"selection",value:e.selection})})),d.innerHTML=o.languages.getLanguages().filter((e=>void 0!==e.aliases)).map((e=>`<option value="${e.id}">${e.aliases[0]}</option>`)).join(""),d.addEventListener("change",(e=>{o.editor.setModelLanguage(i,d.value),_({type:"changeLanguage",value:d.value})})),window.addEventListener("beforeunload",(function(){for(const e of a.values())e.conn.destroy();r.stop()}))}()},{c93a1dfa8169f0df:"VeFoH","3465d684ff9d95e1":"e0wSs"}],VeFoH:[function(e,n,o){n.exports=Promise.all([e("./helpers/browser/js-loader")(e("./helpers/bundle-url").getBundleURL("6bM7J")+e("./helpers/bundle-manifest").resolve("1Kgqg")),e("./helpers/browser/js-loader")(e("./helpers/bundle-url").getBundleURL("6bM7J")+e("./helpers/bundle-manifest").resolve("5z4q1"))]).then((()=>n.bundle.root("6pFsZ")))},{"./helpers/browser/js-loader":"8Dxxm","./helpers/bundle-url":"dTfdA","./helpers/bundle-manifest":"2h5Rj"}],"8Dxxm":[function(e,n,o){"use strict";var t=e("../cacheLoader");n.exports=t((function(e){return new Promise((function(n,o){var t=document.getElementsByTagName("script");if([].concat(t).some((function(n){return n.src===e})))n();else{var s=document.createElement("script");s.async=!0,s.type="text/javascript",s.charset="utf-8",s.src=e,s.onerror=function(e){s.onerror=s.onload=null,s.remove(),o(e)},s.onload=function(){s.onerror=s.onload=null,n()},document.getElementsByTagName("head")[0].appendChild(s)}}))}))},{"../cacheLoader":"lTCbt"}],lTCbt:[function(e,n,o){"use strict";var t={},s={},r={};function a(e){switch(e){case"preload":return s;case"prefetch":return r;default:return t}}n.exports=function(e,n){return function(o){var t=a(n);return t[o]?t[o]:t[o]=e.apply(null,arguments).catch((function(e){throw delete t[o],e}))}}},{}],dTfdA:[function(e,n,o){"use strict";var t={};function s(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}o.getBundleURL=function(e){var n=t[e];return n||(n=function(){try{throw new Error}catch(n){var e=(""+n.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return s(e[2])}return"/"}(),t[e]=n),n},o.getBaseURL=s,o.getOrigin=function(e){var n=(""+e).match(/(https?|file|ftp):\/\/[^/]+/);if(!n)throw new Error("Origin not found");return n[0]}},{}],e0wSs:[function(e,n,o){n.exports=Promise.all([e("./helpers/browser/css-loader")(e("./helpers/bundle-url").getBundleURL("6bM7J")+e("./helpers/bundle-manifest").resolve("52RTZ")),e("./helpers/browser/js-loader")(e("./helpers/bundle-url").getBundleURL("6bM7J")+e("./helpers/bundle-manifest").resolve("iYm2R")),e("./helpers/browser/js-loader")(e("./helpers/bundle-url").getBundleURL("6bM7J")+e("./helpers/bundle-manifest").resolve("1Kgqg")),e("./helpers/browser/js-loader")(e("./helpers/bundle-url").getBundleURL("6bM7J")+e("./helpers/bundle-manifest").resolve("bDnEO"))]).then((()=>n.bundle.root("jrgM5")))},{"./helpers/browser/css-loader":"24eDP","./helpers/bundle-url":"dTfdA","./helpers/bundle-manifest":"2h5Rj","./helpers/browser/js-loader":"8Dxxm"}],"24eDP":[function(e,n,o){"use strict";var t=e("../cacheLoader");n.exports=t((function(e){return new Promise((function(n,o){var t=document.getElementsByTagName("link");if([].concat(t).some((function(n){return n.href===e&&n.rel.indexOf("stylesheet")>-1})))n();else{var s=document.createElement("link");s.rel="stylesheet",s.href=e,s.onerror=function(e){s.onerror=s.onload=null,s.remove(),o(e)},s.onload=function(){s.onerror=s.onload=null,n()},document.getElementsByTagName("head")[0].appendChild(s)}}))}))},{"../cacheLoader":"lTCbt"}]},["gU7Mt","dxeIl"],"dxeIl");